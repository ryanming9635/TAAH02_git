ARM GAS  /tmp/ccsGGFrI.s 			page 1


   1              		.cpu cortex-m3
   2              		.eabi_attribute 20, 1
   3              		.eabi_attribute 21, 1
   4              		.eabi_attribute 23, 3
   5              		.eabi_attribute 24, 1
   6              		.eabi_attribute 25, 1
   7              		.eabi_attribute 26, 1
   8              		.eabi_attribute 30, 1
   9              		.eabi_attribute 34, 1
  10              		.eabi_attribute 18, 4
  11              		.file	"Printf.c"
  12              		.text
  13              	.Ltext0:
  14              		.cfi_sections	.debug_frame
  15              		.section	.text.DoPrint,"ax",%progbits
  16              		.align	1
  17              		.global	DoPrint
  18              		.syntax unified
  19              		.thumb
  20              		.thumb_func
  21              		.fpu softvfp
  23              	DoPrint:
  24              	.LFB3:
  25              		.file 1 "VS4210/Printf.c"
   1:VS4210/Printf.c **** /*****************************************************************************/
   2:VS4210/Printf.c **** /*                                                                           										*/
   3:VS4210/Printf.c **** /*  TELI ML070I   MCU                    													*/
   4:VS4210/Printf.c **** /*                                                                           										*/
   5:VS4210/Printf.c **** /*  Printf.c		                                            										*/
   6:VS4210/Printf.c **** /*                                                                           										*/
   7:VS4210/Printf.c **** /*****************************************************************************/
   8:VS4210/Printf.c **** 
   9:VS4210/Printf.c **** #include "VXIS_Extern_Define.h"
  10:VS4210/Printf.c **** 
  11:VS4210/Printf.c **** #include "tpinc/Device_Rx.h"
  12:VS4210/Printf.c **** #include "tpinc/TP2802.h"
  13:VS4210/Printf.c **** #include "stdlib.h"
  14:VS4210/Printf.c **** #include "VX_swi2c.h"
  15:VS4210/Printf.c **** #include "VS4210.h"
  16:VS4210/Printf.c **** 
  17:VS4210/Printf.c **** //#include "Config.h"
  18:VS4210/Printf.c **** 
  19:VS4210/Printf.c **** //#ifdef SERIAL
  20:VS4210/Printf.c **** 
  21:VS4210/Printf.c **** //#include "reg.h"
  22:VS4210/Printf.c **** //#include "Typedefs.h"
  23:VS4210/Printf.c **** //#include "debug.h"
  24:VS4210/Printf.c **** //#include "main.h"
  25:VS4210/Printf.c **** #include "printf.h"
  26:VS4210/Printf.c **** #include "monitor.h"
  27:VS4210/Printf.c **** 
  28:VS4210/Printf.c **** #include <stdarg.h>
  29:VS4210/Printf.c **** 
  30:VS4210/Printf.c **** 
  31:VS4210/Printf.c **** static const char *_PrintColor[] = {
  32:VS4210/Printf.c **** "\033[0m",
  33:VS4210/Printf.c **** "\033[0;31m",
ARM GAS  /tmp/ccsGGFrI.s 			page 2


  34:VS4210/Printf.c **** "\033[0;32m",
  35:VS4210/Printf.c **** "\033[0;33m",
  36:VS4210/Printf.c **** "\033[0;34m",
  37:VS4210/Printf.c **** "\033[0;35m",
  38:VS4210/Printf.c **** "\033[0;36m",
  39:VS4210/Printf.c **** "\033[0;37m",
  40:VS4210/Printf.c **** };
  41:VS4210/Printf.c **** 
  42:VS4210/Printf.c **** CODE tByte Hex[] = "0123456789ABCDEF";
  43:VS4210/Printf.c **** extern	bit     	RS_Xbusy;			// bit RS_Xbusy=0;
  44:VS4210/Printf.c **** extern	tByte	DebugLevel;
  45:VS4210/Printf.c **** extern BYTE Monitor_flag;
  46:VS4210/Printf.c **** 
  47:VS4210/Printf.c **** 
  48:VS4210/Printf.c **** void DoPrint( const char CODE_P *fmt, va_list ap )
  49:VS4210/Printf.c **** {
  26              		.loc 1 49 0
  27              		.cfi_startproc
  28              		@ args = 0, pretend = 0, frame = 8
  29              		@ frame_needed = 0, uses_anonymous_args = 0
  30              	.LVL0:
  31 0000 2DE9F041 		push	{r4, r5, r6, r7, r8, lr}
  32              	.LCFI0:
  33              		.cfi_def_cfa_offset 24
  34              		.cfi_offset 4, -24
  35              		.cfi_offset 5, -20
  36              		.cfi_offset 6, -16
  37              		.cfi_offset 7, -12
  38              		.cfi_offset 8, -8
  39              		.cfi_offset 14, -4
  40 0004 82B0     		sub	sp, sp, #8
  41              	.LCFI1:
  42              		.cfi_def_cfa_offset 32
  43 0006 0446     		mov	r4, r0
  44 0008 0191     		str	r1, [sp, #4]
  45              	.LVL1:
  50:VS4210/Printf.c **** 	char  ch;
  51:VS4210/Printf.c **** 	char  i;
  52:VS4210/Printf.c **** 	long  value=_FALSE;
  46              		.loc 1 52 0
  47 000a 0025     		movs	r5, #0
  48 000c 03E0     		b	.L2
  49              	.LVL2:
  50              	.L51:
  53:VS4210/Printf.c **** 	bit   fl_zero;
  54:VS4210/Printf.c **** //	bit   fl_num;
  55:VS4210/Printf.c **** 	BYTE  fl_len;
  56:VS4210/Printf.c **** 	BYTE  cnt;
  57:VS4210/Printf.c **** 	DWORD mask=1;
  58:VS4210/Printf.c **** 
  59:VS4210/Printf.c **** 	#ifdef KEILC
  60:VS4210/Printf.c **** 	char *ptr;
  61:VS4210/Printf.c **** 	#endif
  62:VS4210/Printf.c **** 
  63:VS4210/Printf.c **** 	while(1) {
  64:VS4210/Printf.c **** 		
  65:VS4210/Printf.c **** 		//----- Find Formatter % -----
ARM GAS  /tmp/ccsGGFrI.s 			page 3


  66:VS4210/Printf.c **** 
  67:VS4210/Printf.c **** 		switch( ch = *fmt++ ) {
  68:VS4210/Printf.c **** 			case 0:		return;
  69:VS4210/Printf.c **** 			case '%':	if( *fmt != '%' ) break;
  70:VS4210/Printf.c **** 						fmt++;
  51              		.loc 1 70 0
  52 000e A61C     		adds	r6, r4, #2
  53              	.LVL3:
  54              	.L3:
  71:VS4210/Printf.c **** 			default:	_outchar( ch );
  55              		.loc 1 71 0
  56 0010 FFF7FEFF 		bl	RS_tx
  57              	.LVL4:
  72:VS4210/Printf.c **** 						continue;
  58              		.loc 1 72 0
  59 0014 3446     		mov	r4, r6
  60              	.LVL5:
  61              	.L2:
  67:VS4210/Printf.c **** 			case 0:		return;
  62              		.loc 1 67 0
  63 0016 661C     		adds	r6, r4, #1
  64              	.LVL6:
  65 0018 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
  66              	.LVL7:
  67 001a 0028     		cmp	r0, #0
  68 001c 00F00E81 		beq	.L1
  69 0020 2528     		cmp	r0, #37
  70 0022 F5D1     		bne	.L3
  69:VS4210/Printf.c **** 						fmt++;
  71              		.loc 1 69 0
  72 0024 6378     		ldrb	r3, [r4, #1]	@ zero_extendqisi2
  73 0026 252B     		cmp	r3, #37
  74 0028 F1D0     		beq	.L51
  75              	.LVL8:
  73:VS4210/Printf.c **** 		}
  74:VS4210/Printf.c **** 
  75:VS4210/Printf.c **** 		//----- Get Count -------------
  76:VS4210/Printf.c **** 		
  77:VS4210/Printf.c **** 		fl_zero = 0;
  78:VS4210/Printf.c **** 		//fl_num = 0;
  79:VS4210/Printf.c **** 		cnt = 0;
  80:VS4210/Printf.c **** 
  81:VS4210/Printf.c **** 		ch = *fmt++;
  76              		.loc 1 81 0
  77 002a A21C     		adds	r2, r4, #2
  78              	.LVL9:
  82:VS4210/Printf.c **** 
  83:VS4210/Printf.c **** 		if( ch=='0' ) {
  79              		.loc 1 83 0
  80 002c 302B     		cmp	r3, #48
  81 002e 09D0     		beq	.L52
  84:VS4210/Printf.c **** 			fl_zero = 1;
  85:VS4210/Printf.c **** 			ch = *fmt++;
  86:VS4210/Printf.c **** 			cnt = ch - '0';
  87:VS4210/Printf.c **** 			ch = *fmt++;
  88:VS4210/Printf.c **** 		}
  89:VS4210/Printf.c **** 		else if( ch>='0' && ch<='9' ) {
ARM GAS  /tmp/ccsGGFrI.s 			page 4


  82              		.loc 1 89 0
  83 0030 A3F13006 		sub	r6, r3, #48
  84 0034 F6B2     		uxtb	r6, r6
  85 0036 092E     		cmp	r6, #9
  86 0038 3DD8     		bhi	.L44
  87              	.LVL10:
  90:VS4210/Printf.c **** 			cnt = ch - '0';
  91:VS4210/Printf.c **** 			ch = *fmt++;
  88              		.loc 1 91 0
  89 003a A378     		ldrb	r3, [r4, #2]	@ zero_extendqisi2
  90              	.LVL11:
  91 003c 0334     		adds	r4, r4, #3
  92              	.LVL12:
  77:VS4210/Printf.c **** 		//fl_num = 0;
  93              		.loc 1 77 0
  94 003e 4FF00008 		mov	r8, #0
  95 0042 06E0     		b	.L9
  96              	.LVL13:
  97              	.L52:
  85:VS4210/Printf.c **** 			cnt = ch - '0';
  98              		.loc 1 85 0
  99 0044 A678     		ldrb	r6, [r4, #2]	@ zero_extendqisi2
 100              	.LVL14:
  86:VS4210/Printf.c **** 			ch = *fmt++;
 101              		.loc 1 86 0
 102 0046 303E     		subs	r6, r6, #48
 103              	.LVL15:
 104 0048 F6B2     		uxtb	r6, r6
 105              	.LVL16:
  87:VS4210/Printf.c **** 		}
 106              		.loc 1 87 0
 107 004a E378     		ldrb	r3, [r4, #3]	@ zero_extendqisi2
 108              	.LVL17:
 109 004c 0434     		adds	r4, r4, #4
 110              	.LVL18:
  84:VS4210/Printf.c **** 			ch = *fmt++;
 111              		.loc 1 84 0
 112 004e 4FF00108 		mov	r8, #1
 113              	.LVL19:
 114              	.L9:
  92:VS4210/Printf.c **** 		}
  93:VS4210/Printf.c **** 
  94:VS4210/Printf.c **** 		//----- Get char(B) / int / long(L) ----------------
  95:VS4210/Printf.c **** 
  96:VS4210/Printf.c **** 		fl_len = 2;
  97:VS4210/Printf.c **** 
  98:VS4210/Printf.c **** 		switch(ch) {
 115              		.loc 1 98 0
 116 0052 4C2B     		cmp	r3, #76
 117 0054 04D0     		beq	.L11
 118 0056 32D9     		bls	.L53
 119 0058 622B     		cmp	r3, #98
 120 005a 34D0     		beq	.L13
 121 005c 6C2B     		cmp	r3, #108
 122 005e 30D1     		bne	.L45
 123              	.L11:
 124              	.LVL20:
ARM GAS  /tmp/ccsGGFrI.s 			page 5


  99:VS4210/Printf.c **** 		case 'l':
 100:VS4210/Printf.c **** 		case 'L':	ch = *fmt++;	fl_len = 4;		break;
 125              		.loc 1 100 0
 126 0060 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 127              	.LVL21:
 128 0062 0134     		adds	r4, r4, #1
 129              	.LVL22:
 130 0064 0421     		movs	r1, #4
 131              	.LVL23:
 132              	.L10:
 101:VS4210/Printf.c **** 		case 'b':
 102:VS4210/Printf.c **** 		case 'B':	ch = *fmt++;	fl_len = 1;		break;
 103:VS4210/Printf.c **** 		}		
 104:VS4210/Printf.c **** 
 105:VS4210/Printf.c **** 		//----- Get Type Discriptor -----
 106:VS4210/Printf.c **** 		
 107:VS4210/Printf.c **** 		switch( ch ) {
 133              		.loc 1 107 0
 134 0066 A3F15802 		sub	r2, r3, #88
 135 006a 202A     		cmp	r2, #32
 136 006c 00F2E180 		bhi	.L14
 137 0070 DFE812F0 		tbh	[pc, r2, lsl #1]
 138              	.L16:
 139 0074 A200     		.2byte	(.L15-.L16)/2
 140 0076 DF00     		.2byte	(.L14-.L16)/2
 141 0078 DF00     		.2byte	(.L14-.L16)/2
 142 007a DF00     		.2byte	(.L14-.L16)/2
 143 007c DF00     		.2byte	(.L14-.L16)/2
 144 007e DF00     		.2byte	(.L14-.L16)/2
 145 0080 DF00     		.2byte	(.L14-.L16)/2
 146 0082 DF00     		.2byte	(.L14-.L16)/2
 147 0084 DF00     		.2byte	(.L14-.L16)/2
 148 0086 DF00     		.2byte	(.L14-.L16)/2
 149 0088 DF00     		.2byte	(.L14-.L16)/2
 150 008a D700     		.2byte	(.L17-.L16)/2
 151 008c 2D00     		.2byte	(.L18-.L16)/2
 152 008e DF00     		.2byte	(.L14-.L16)/2
 153 0090 DF00     		.2byte	(.L14-.L16)/2
 154 0092 DF00     		.2byte	(.L14-.L16)/2
 155 0094 DF00     		.2byte	(.L14-.L16)/2
 156 0096 DF00     		.2byte	(.L14-.L16)/2
 157 0098 DF00     		.2byte	(.L14-.L16)/2
 158 009a DF00     		.2byte	(.L14-.L16)/2
 159 009c DF00     		.2byte	(.L14-.L16)/2
 160 009e DF00     		.2byte	(.L14-.L16)/2
 161 00a0 DF00     		.2byte	(.L14-.L16)/2
 162 00a2 DF00     		.2byte	(.L14-.L16)/2
 163 00a4 DF00     		.2byte	(.L14-.L16)/2
 164 00a6 DF00     		.2byte	(.L14-.L16)/2
 165 00a8 DF00     		.2byte	(.L14-.L16)/2
 166 00aa CB00     		.2byte	(.L19-.L16)/2
 167 00ac DF00     		.2byte	(.L14-.L16)/2
 168 00ae 2D00     		.2byte	(.L18-.L16)/2
 169 00b0 DF00     		.2byte	(.L14-.L16)/2
 170 00b2 DF00     		.2byte	(.L14-.L16)/2
 171 00b4 A200     		.2byte	(.L15-.L16)/2
 172              	.LVL24:
ARM GAS  /tmp/ccsGGFrI.s 			page 6


 173              		.p2align 1
 174              	.L44:
  81:VS4210/Printf.c **** 
 175              		.loc 1 81 0
 176 00b6 1446     		mov	r4, r2
  79:VS4210/Printf.c **** 
 177              		.loc 1 79 0
 178 00b8 0026     		movs	r6, #0
  77:VS4210/Printf.c **** 		//fl_num = 0;
 179              		.loc 1 77 0
 180 00ba B046     		mov	r8, r6
 181 00bc C9E7     		b	.L9
 182              	.LVL25:
 183              	.L53:
  98:VS4210/Printf.c **** 		case 'l':
 184              		.loc 1 98 0
 185 00be 422B     		cmp	r3, #66
 186 00c0 01D0     		beq	.L13
 187              	.L45:
  96:VS4210/Printf.c **** 
 188              		.loc 1 96 0
 189 00c2 0221     		movs	r1, #2
 190 00c4 CFE7     		b	.L10
 191              	.L13:
 192              	.LVL26:
 102:VS4210/Printf.c **** 		}		
 193              		.loc 1 102 0
 194 00c6 2378     		ldrb	r3, [r4]	@ zero_extendqisi2
 195              	.LVL27:
 196 00c8 0134     		adds	r4, r4, #1
 197              	.LVL28:
 198 00ca 0121     		movs	r1, #1
 199 00cc CBE7     		b	.L10
 200              	.LVL29:
 201              	.L18:
 108:VS4210/Printf.c **** 
 109:VS4210/Printf.c **** 			case 'd':
 110:VS4210/Printf.c **** 			case 'u':
 111:VS4210/Printf.c **** 
 112:VS4210/Printf.c **** 				switch (fl_len) {
 202              		.loc 1 112 0
 203 00ce 0229     		cmp	r1, #2
 204 00d0 22D0     		beq	.L21
 205 00d2 0429     		cmp	r1, #4
 206 00d4 2CD0     		beq	.L22
 207 00d6 0129     		cmp	r1, #1
 208 00d8 12D0     		beq	.L54
 209              	.LVL30:
 210              	.L20:
 113:VS4210/Printf.c **** 				case 1:
 114:VS4210/Printf.c **** 					#if 1//ryan@20200511
 115:VS4210/Printf.c **** 					if( ch=='d' ) value = (int)va_arg( ap, int );
 116:VS4210/Printf.c **** 					else          value = (int)va_arg( ap, int );
 117:VS4210/Printf.c **** 
 118:VS4210/Printf.c **** 					#else
 119:VS4210/Printf.c **** 					if( ch=='d' ) value = (char)va_arg( ap, char );
 120:VS4210/Printf.c **** 					else          value = (BYTE)va_arg( ap, BYTE );
ARM GAS  /tmp/ccsGGFrI.s 			page 7


 121:VS4210/Printf.c **** 					#endif
 122:VS4210/Printf.c **** 					break;
 123:VS4210/Printf.c **** 				
 124:VS4210/Printf.c **** 				case 2:
 125:VS4210/Printf.c **** 					if( ch=='d' ) value = (int)va_arg( ap,  int );
 126:VS4210/Printf.c **** 					else          value = (WORD)va_arg( ap, WORD );
 127:VS4210/Printf.c **** 					break;
 128:VS4210/Printf.c **** 
 129:VS4210/Printf.c **** 				case 4:
 130:VS4210/Printf.c **** 					if( ch=='d' ) value = (long)va_arg( ap, long );
 131:VS4210/Printf.c **** 					else          value = (DWORD)va_arg( ap, DWORD );
 132:VS4210/Printf.c **** 					break;
 133:VS4210/Printf.c **** 				}
 134:VS4210/Printf.c **** 
 135:VS4210/Printf.c **** 				if( value<0 ) {
 211              		.loc 1 135 0
 212 00da 002D     		cmp	r5, #0
 213 00dc 34DB     		blt	.L55
 214              	.LVL31:
 215              	.L27:
 136:VS4210/Printf.c **** 					_outchar('-');
 137:VS4210/Printf.c **** 					value = value*(-1);
 138:VS4210/Printf.c **** 				}
 139:VS4210/Printf.c **** 
 140:VS4210/Printf.c **** 				if(cnt==0) {
 216              		.loc 1 140 0
 217 00de 002E     		cmp	r6, #0
 218 00e0 3BD1     		bne	.L28
 141:VS4210/Printf.c **** 					if( value==0 ) { _outchar('0'); continue; }
 219              		.loc 1 141 0
 220 00e2 002D     		cmp	r5, #0
 221 00e4 35D0     		beq	.L56
 142:VS4210/Printf.c **** 
 143:VS4210/Printf.c **** 					for(cnt=0, mask=1; cnt<10; cnt++) {
 222              		.loc 1 143 0
 223 00e6 0123     		movs	r3, #1
 224              	.L29:
 225              	.LVL32:
 226              		.loc 1 143 0 is_stmt 0 discriminator 1
 227 00e8 092E     		cmp	r6, #9
 228 00ea 36D8     		bhi	.L28
 144:VS4210/Printf.c **** 						if( (value/mask)==0 ) break;
 229              		.loc 1 144 0 is_stmt 1
 230 00ec B5FBF3F2 		udiv	r2, r5, r3
 231 00f0 002A     		cmp	r2, #0
 232 00f2 32D0     		beq	.L28
 145:VS4210/Printf.c **** 						mask = mask*10;
 233              		.loc 1 145 0 discriminator 2
 234 00f4 03EB8302 		add	r2, r3, r3, lsl #2
 235 00f8 5300     		lsls	r3, r2, #1
 236              	.LVL33:
 143:VS4210/Printf.c **** 						if( (value/mask)==0 ) break;
 237              		.loc 1 143 0 discriminator 2
 238 00fa 0136     		adds	r6, r6, #1
 239              	.LVL34:
 240 00fc F6B2     		uxtb	r6, r6
 241              	.LVL35:
ARM GAS  /tmp/ccsGGFrI.s 			page 8


 242 00fe F3E7     		b	.L29
 243              	.LVL36:
 244              	.L54:
 115:VS4210/Printf.c **** 					else          value = (int)va_arg( ap, int );
 245              		.loc 1 115 0
 246 0100 642B     		cmp	r3, #100
 247 0102 04D0     		beq	.L57
 116:VS4210/Printf.c **** 
 248              		.loc 1 116 0
 249 0104 019B     		ldr	r3, [sp, #4]
 250              	.LVL37:
 251 0106 1A1D     		adds	r2, r3, #4
 252 0108 0192     		str	r2, [sp, #4]
 253 010a 1D68     		ldr	r5, [r3]
 254              	.LVL38:
 255 010c E5E7     		b	.L20
 256              	.LVL39:
 257              	.L57:
 115:VS4210/Printf.c **** 					else          value = (int)va_arg( ap, int );
 258              		.loc 1 115 0
 259 010e 019B     		ldr	r3, [sp, #4]
 260              	.LVL40:
 261 0110 1A1D     		adds	r2, r3, #4
 262 0112 0192     		str	r2, [sp, #4]
 263 0114 1D68     		ldr	r5, [r3]
 264              	.LVL41:
 265 0116 E0E7     		b	.L20
 266              	.LVL42:
 267              	.L21:
 125:VS4210/Printf.c **** 					else          value = (WORD)va_arg( ap, WORD );
 268              		.loc 1 125 0
 269 0118 642B     		cmp	r3, #100
 270 011a 04D0     		beq	.L58
 126:VS4210/Printf.c **** 					break;
 271              		.loc 1 126 0
 272 011c 019B     		ldr	r3, [sp, #4]
 273              	.LVL43:
 274 011e 1A1D     		adds	r2, r3, #4
 275 0120 0192     		str	r2, [sp, #4]
 276 0122 1D68     		ldr	r5, [r3]
 277              	.LVL44:
 278 0124 D9E7     		b	.L20
 279              	.LVL45:
 280              	.L58:
 125:VS4210/Printf.c **** 					else          value = (WORD)va_arg( ap, WORD );
 281              		.loc 1 125 0
 282 0126 019B     		ldr	r3, [sp, #4]
 283              	.LVL46:
 284 0128 1A1D     		adds	r2, r3, #4
 285 012a 0192     		str	r2, [sp, #4]
 286 012c 1D68     		ldr	r5, [r3]
 287              	.LVL47:
 288 012e D4E7     		b	.L20
 289              	.LVL48:
 290              	.L22:
 130:VS4210/Printf.c **** 					else          value = (DWORD)va_arg( ap, DWORD );
 291              		.loc 1 130 0
ARM GAS  /tmp/ccsGGFrI.s 			page 9


 292 0130 642B     		cmp	r3, #100
 293 0132 04D0     		beq	.L59
 131:VS4210/Printf.c **** 					break;
 294              		.loc 1 131 0
 295 0134 019B     		ldr	r3, [sp, #4]
 296              	.LVL49:
 297 0136 1A1D     		adds	r2, r3, #4
 298 0138 0192     		str	r2, [sp, #4]
 299 013a 1D68     		ldr	r5, [r3]
 300              	.LVL50:
 301 013c CDE7     		b	.L20
 302              	.LVL51:
 303              	.L59:
 130:VS4210/Printf.c **** 					else          value = (DWORD)va_arg( ap, DWORD );
 304              		.loc 1 130 0
 305 013e 019B     		ldr	r3, [sp, #4]
 306              	.LVL52:
 307 0140 1A1D     		adds	r2, r3, #4
 308 0142 0192     		str	r2, [sp, #4]
 309 0144 1D68     		ldr	r5, [r3]
 310              	.LVL53:
 311 0146 C8E7     		b	.L20
 312              	.LVL54:
 313              	.L55:
 136:VS4210/Printf.c **** 					value = value*(-1);
 314              		.loc 1 136 0
 315 0148 2D20     		movs	r0, #45
 316 014a FFF7FEFF 		bl	RS_tx
 317              	.LVL55:
 137:VS4210/Printf.c **** 				}
 318              		.loc 1 137 0
 319 014e 6D42     		negs	r5, r5
 320              	.LVL56:
 321 0150 C5E7     		b	.L27
 322              	.L56:
 141:VS4210/Printf.c **** 
 323              		.loc 1 141 0 discriminator 1
 324 0152 3020     		movs	r0, #48
 325 0154 FFF7FEFF 		bl	RS_tx
 326              	.LVL57:
 327 0158 5DE7     		b	.L2
 328              	.L28:
 329              	.LVL58:
 146:VS4210/Printf.c **** 					}
 147:VS4210/Printf.c **** 				}
 148:VS4210/Printf.c **** 
 149:VS4210/Printf.c **** 				for(i=0, mask=1; i<cnt-1; i++) mask = mask*10;
 330              		.loc 1 149 0
 331 015a 0127     		movs	r7, #1
 332 015c 0023     		movs	r3, #0
 333 015e 04E0     		b	.L31
 334              	.LVL59:
 335              	.L32:
 336              		.loc 1 149 0 is_stmt 0 discriminator 3
 337 0160 07EB8702 		add	r2, r7, r7, lsl #2
 338 0164 5700     		lsls	r7, r2, #1
 339              	.LVL60:
ARM GAS  /tmp/ccsGGFrI.s 			page 10


 340 0166 0133     		adds	r3, r3, #1
 341              	.LVL61:
 342 0168 DBB2     		uxtb	r3, r3
 343              	.LVL62:
 344              	.L31:
 345              		.loc 1 149 0 discriminator 1
 346 016a 721E     		subs	r2, r6, #1
 347 016c 9342     		cmp	r3, r2
 348 016e F7DB     		blt	.L32
 349 0170 17E0     		b	.L34
 350              	.LVL63:
 351              	.L61:
 150:VS4210/Printf.c **** 
 151:VS4210/Printf.c **** 				while(1) {
 152:VS4210/Printf.c **** 					ch = (value / mask) + '0';
 153:VS4210/Printf.c **** 					if( ch=='0' && fl_zero==0 && mask!=1 ) ch=' ';
 352              		.loc 1 153 0 is_stmt 1 discriminator 1
 353 0172 B8F1000F 		cmp	r8, #0
 354 0176 06D1     		bne	.L48
 355              		.loc 1 153 0 is_stmt 0 discriminator 2
 356 0178 012F     		cmp	r7, #1
 357 017a 01D0     		beq	.L60
 358              		.loc 1 153 0
 359 017c 2020     		movs	r0, #32
 360              	.LVL64:
 361 017e 04E0     		b	.L33
 362              	.LVL65:
 363              	.L60:
 154:VS4210/Printf.c **** 					else fl_zero = 1;
 364              		.loc 1 154 0 is_stmt 1
 365 0180 4FF00108 		mov	r8, #1
 366              	.LVL66:
 367 0184 01E0     		b	.L33
 368              	.LVL67:
 369              	.L48:
 370 0186 4FF00108 		mov	r8, #1
 371              	.LVL68:
 372              	.L33:
 155:VS4210/Printf.c **** 					_outchar(ch);
 373              		.loc 1 155 0
 374 018a FFF7FEFF 		bl	RS_tx
 375              	.LVL69:
 156:VS4210/Printf.c **** 
 157:VS4210/Printf.c **** 					value = value % (mask);
 376              		.loc 1 157 0
 377 018e B6FBF7F5 		udiv	r5, r6, r7
 378              	.LVL70:
 379 0192 07FB1565 		mls	r5, r7, r5, r6
 380              	.LVL71:
 158:VS4210/Printf.c **** 					mask = mask / 10;
 381              		.loc 1 158 0
 382 0196 2B4B     		ldr	r3, .L63
 383 0198 A3FB0737 		umull	r3, r7, r3, r7
 384              	.LVL72:
 159:VS4210/Printf.c **** 					
 160:VS4210/Printf.c **** 					if( mask==0 )
 385              		.loc 1 160 0
ARM GAS  /tmp/ccsGGFrI.s 			page 11


 386 019c FF08     		lsrs	r7, r7, #3
 387              	.LVL73:
 388 019e 3FF43AAF 		beq	.L2
 389              	.L34:
 152:VS4210/Printf.c **** 					if( ch=='0' && fl_zero==0 && mask!=1 ) ch=' ';
 390              		.loc 1 152 0
 391 01a2 2E46     		mov	r6, r5
 392 01a4 B5FBF7F0 		udiv	r0, r5, r7
 393 01a8 C0B2     		uxtb	r0, r0
 394 01aa 3030     		adds	r0, r0, #48
 395 01ac C0B2     		uxtb	r0, r0
 396              	.LVL74:
 153:VS4210/Printf.c **** 					else fl_zero = 1;
 397              		.loc 1 153 0
 398 01ae 3028     		cmp	r0, #48
 399 01b0 DFD0     		beq	.L61
 154:VS4210/Printf.c **** 					_outchar(ch);
 400              		.loc 1 154 0
 401 01b2 4FF00108 		mov	r8, #1
 402              	.LVL75:
 403 01b6 E8E7     		b	.L33
 404              	.LVL76:
 405              	.L15:
 161:VS4210/Printf.c **** 						break;
 162:VS4210/Printf.c **** 				}
 163:VS4210/Printf.c **** 				continue;
 164:VS4210/Printf.c **** 
 165:VS4210/Printf.c **** 			case 'x':
 166:VS4210/Printf.c **** 			case 'X':
 167:VS4210/Printf.c **** 
 168:VS4210/Printf.c **** 				switch (fl_len) {
 406              		.loc 1 168 0
 407 01b8 0229     		cmp	r1, #2
 408 01ba 0CD0     		beq	.L36
 409 01bc 0429     		cmp	r1, #4
 410 01be 0FD0     		beq	.L37
 411 01c0 0129     		cmp	r1, #1
 412 01c2 03D0     		beq	.L62
 413              	.LVL77:
 414              	.L35:
 169:VS4210/Printf.c **** 					#if 1//ryan@20200511
 170:VS4210/Printf.c **** 					case 1: value = (int)va_arg( ap, int);		break;
 171:VS4210/Printf.c **** 					#else
 172:VS4210/Printf.c **** 				case 1:	value = (BYTE)va_arg( ap, BYTE );		break;
 173:VS4210/Printf.c **** 				#endif
 174:VS4210/Printf.c **** 				case 2:	value = (WORD)va_arg( ap, WORD );		break;
 175:VS4210/Printf.c **** 				case 4:	value = (DWORD)va_arg( ap, DWORD );		break;
 176:VS4210/Printf.c **** 				}
 177:VS4210/Printf.c **** 
 178:VS4210/Printf.c **** 				if(cnt==0) cnt = fl_len*2;
 415              		.loc 1 178 0
 416 01c4 06B9     		cbnz	r6, .L39
 417              		.loc 1 178 0 is_stmt 0 discriminator 1
 418 01c6 4E00     		lsls	r6, r1, #1
 419              	.LVL78:
 420              	.L39:
 179:VS4210/Printf.c **** 
ARM GAS  /tmp/ccsGGFrI.s 			page 12


 180:VS4210/Printf.c **** 				for(i=0; i<cnt; i++) {
 421              		.loc 1 180 0 is_stmt 1
 422 01c8 0027     		movs	r7, #0
 423 01ca 1BE0     		b	.L40
 424              	.LVL79:
 425              	.L62:
 170:VS4210/Printf.c **** 					#else
 426              		.loc 1 170 0
 427 01cc 019B     		ldr	r3, [sp, #4]
 428              	.LVL80:
 429 01ce 1A1D     		adds	r2, r3, #4
 430 01d0 0192     		str	r2, [sp, #4]
 431 01d2 1D68     		ldr	r5, [r3]
 432              	.LVL81:
 433 01d4 F6E7     		b	.L35
 434              	.LVL82:
 435              	.L36:
 174:VS4210/Printf.c **** 				case 4:	value = (DWORD)va_arg( ap, DWORD );		break;
 436              		.loc 1 174 0
 437 01d6 019B     		ldr	r3, [sp, #4]
 438              	.LVL83:
 439 01d8 1A1D     		adds	r2, r3, #4
 440 01da 0192     		str	r2, [sp, #4]
 441 01dc 1D68     		ldr	r5, [r3]
 442              	.LVL84:
 443 01de F1E7     		b	.L35
 444              	.LVL85:
 445              	.L37:
 175:VS4210/Printf.c **** 				}
 446              		.loc 1 175 0
 447 01e0 019B     		ldr	r3, [sp, #4]
 448              	.LVL86:
 449 01e2 1A1D     		adds	r2, r3, #4
 450 01e4 0192     		str	r2, [sp, #4]
 451 01e6 1D68     		ldr	r5, [r3]
 452              	.LVL87:
 453 01e8 ECE7     		b	.L35
 454              	.LVL88:
 455              	.L41:
 181:VS4210/Printf.c **** 					_outchar( Hex[(value >> (cnt-i-1)*4) & 0x000f] );
 456              		.loc 1 181 0 discriminator 3
 457 01ea F31B     		subs	r3, r6, r7
 458 01ec 013B     		subs	r3, r3, #1
 459 01ee 9B00     		lsls	r3, r3, #2
 460 01f0 45FA03F3 		asr	r3, r5, r3
 461 01f4 03F00F03 		and	r3, r3, #15
 462 01f8 134A     		ldr	r2, .L63+4
 463 01fa D05C     		ldrb	r0, [r2, r3]	@ zero_extendqisi2
 464 01fc FFF7FEFF 		bl	RS_tx
 465              	.LVL89:
 180:VS4210/Printf.c **** 					_outchar( Hex[(value >> (cnt-i-1)*4) & 0x000f] );
 466              		.loc 1 180 0 discriminator 3
 467 0200 0137     		adds	r7, r7, #1
 468              	.LVL90:
 469 0202 FFB2     		uxtb	r7, r7
 470              	.LVL91:
 471              	.L40:
ARM GAS  /tmp/ccsGGFrI.s 			page 13


 180:VS4210/Printf.c **** 					_outchar( Hex[(value >> (cnt-i-1)*4) & 0x000f] );
 472              		.loc 1 180 0 is_stmt 0 discriminator 1
 473 0204 B742     		cmp	r7, r6
 474 0206 F0D3     		bcc	.L41
 475 0208 05E7     		b	.L2
 476              	.LVL92:
 477              	.L19:
 182:VS4210/Printf.c **** 				}
 183:VS4210/Printf.c **** 				continue;
 184:VS4210/Printf.c **** 
 185:VS4210/Printf.c **** 			case 's':
 186:VS4210/Printf.c **** 
 187:VS4210/Printf.c **** 				#ifdef TASKINGC
 188:VS4210/Printf.c **** 				
 189:VS4210/Printf.c **** 				value = (WORD)va_arg( ap, WORD );
 190:VS4210/Printf.c **** 				while(*(char CODE_P *)value!='\0')
 191:VS4210/Printf.c **** 					_outchar(*(char CODE_P *)value++);
 192:VS4210/Printf.c **** 				continue;
 193:VS4210/Printf.c **** 
 194:VS4210/Printf.c **** 				#elif defined KEILC
 195:VS4210/Printf.c **** 				
 196:VS4210/Printf.c **** 				ptr = (char *)va_arg( ap, char* );
 478              		.loc 1 196 0 is_stmt 1
 479 020a 019B     		ldr	r3, [sp, #4]
 480              	.LVL93:
 481 020c 1A1D     		adds	r2, r3, #4
 482 020e 0192     		str	r2, [sp, #4]
 483 0210 1E68     		ldr	r6, [r3]
 484              	.LVL94:
 197:VS4210/Printf.c **** 				while(*ptr!='\0')
 485              		.loc 1 197 0
 486 0212 02E0     		b	.L42
 487              	.LVL95:
 488              	.L43:
 198:VS4210/Printf.c **** 					_outchar(*ptr++);
 489              		.loc 1 198 0
 490 0214 0136     		adds	r6, r6, #1
 491              	.LVL96:
 492 0216 FFF7FEFF 		bl	RS_tx
 493              	.LVL97:
 494              	.L42:
 197:VS4210/Printf.c **** 				while(*ptr!='\0')
 495              		.loc 1 197 0
 496 021a 3078     		ldrb	r0, [r6]	@ zero_extendqisi2
 497 021c 0028     		cmp	r0, #0
 498 021e F9D1     		bne	.L43
 499 0220 F9E6     		b	.L2
 500              	.LVL98:
 501              	.L17:
 199:VS4210/Printf.c **** 				continue;
 200:VS4210/Printf.c **** 
 201:VS4210/Printf.c **** 				#endif
 202:VS4210/Printf.c **** 
 203:VS4210/Printf.c **** 
 204:VS4210/Printf.c **** 			case 'c':
 205:VS4210/Printf.c **** 				value = va_arg( ap, int );
 502              		.loc 1 205 0
ARM GAS  /tmp/ccsGGFrI.s 			page 14


 503 0222 019B     		ldr	r3, [sp, #4]
 504              	.LVL99:
 505 0224 1A1D     		adds	r2, r3, #4
 506 0226 0192     		str	r2, [sp, #4]
 507 0228 1D68     		ldr	r5, [r3]
 508              	.LVL100:
 206:VS4210/Printf.c **** 					_outchar((BYTE)value);
 509              		.loc 1 206 0
 510 022a E8B2     		uxtb	r0, r5
 511 022c FFF7FEFF 		bl	RS_tx
 512              	.LVL101:
 207:VS4210/Printf.c **** 				continue;
 513              		.loc 1 207 0
 514 0230 F1E6     		b	.L2
 515              	.LVL102:
 516              	.L14:
 208:VS4210/Printf.c **** 
 209:VS4210/Printf.c **** 			default:
 210:VS4210/Printf.c **** 				value = (WORD)va_arg( ap, int );
 517              		.loc 1 210 0
 518 0232 019B     		ldr	r3, [sp, #4]
 519              	.LVL103:
 520 0234 1A1D     		adds	r2, r3, #4
 521 0236 0192     		str	r2, [sp, #4]
 522 0238 1D68     		ldr	r5, [r3]
 523              	.LVL104:
 211:VS4210/Printf.c **** 				continue;
 524              		.loc 1 211 0
 525 023a ECE6     		b	.L2
 526              	.LVL105:
 527              	.L1:
 212:VS4210/Printf.c **** 		}
 213:VS4210/Printf.c **** 	}
 214:VS4210/Printf.c **** }
 528              		.loc 1 214 0
 529 023c 02B0     		add	sp, sp, #8
 530              	.LCFI2:
 531              		.cfi_def_cfa_offset 24
 532              		@ sp needed
 533 023e BDE8F081 		pop	{r4, r5, r6, r7, r8, pc}
 534              	.LVL106:
 535              	.L64:
 536 0242 00BF     		.align	2
 537              	.L63:
 538 0244 CDCCCCCC 		.word	-858993459
 539 0248 00000000 		.word	.LANCHOR0
 540              		.cfi_endproc
 541              	.LFE3:
 543              		.section	.text.Printf,"ax",%progbits
 544              		.align	1
 545              		.global	Printf
 546              		.syntax unified
 547              		.thumb
 548              		.thumb_func
 549              		.fpu softvfp
 551              	Printf:
 552              	.LFB4:
ARM GAS  /tmp/ccsGGFrI.s 			page 15


 215:VS4210/Printf.c **** 
 216:VS4210/Printf.c **** //===========================================================================//
 217:VS4210/Printf.c **** //                                                                           //
 218:VS4210/Printf.c **** //===========================================================================//
 219:VS4210/Printf.c **** //va_list ap;
 220:VS4210/Printf.c **** 
 221:VS4210/Printf.c **** void Printf( const char CODE_P *fmt, ... )
 222:VS4210/Printf.c **** {
 553              		.loc 1 222 0
 554              		.cfi_startproc
 555              		@ args = 4, pretend = 16, frame = 8
 556              		@ frame_needed = 0, uses_anonymous_args = 1
 557              	.LVL107:
 558 0000 0FB4     		push	{r0, r1, r2, r3}
 559              	.LCFI3:
 560              		.cfi_def_cfa_offset 16
 561              		.cfi_offset 0, -16
 562              		.cfi_offset 1, -12
 563              		.cfi_offset 2, -8
 564              		.cfi_offset 3, -4
 565 0002 00B5     		push	{lr}
 566              	.LCFI4:
 567              		.cfi_def_cfa_offset 20
 568              		.cfi_offset 14, -20
 569 0004 83B0     		sub	sp, sp, #12
 570              	.LCFI5:
 571              		.cfi_def_cfa_offset 32
 572 0006 04A9     		add	r1, sp, #16
 573 0008 51F8040B 		ldr	r0, [r1], #4
 223:VS4210/Printf.c **** 	va_list ap;
 224:VS4210/Printf.c **** 
 225:VS4210/Printf.c **** 	va_start(ap, fmt);
 574              		.loc 1 225 0
 575 000c 0191     		str	r1, [sp, #4]
 226:VS4210/Printf.c **** 	DoPrint( fmt, ap );
 576              		.loc 1 226 0
 577 000e FFF7FEFF 		bl	DoPrint
 578              	.LVL108:
 227:VS4210/Printf.c **** 	va_end( ap );
 228:VS4210/Printf.c **** }
 579              		.loc 1 228 0
 580 0012 03B0     		add	sp, sp, #12
 581              	.LCFI6:
 582              		.cfi_def_cfa_offset 20
 583              		@ sp needed
 584 0014 5DF804EB 		ldr	lr, [sp], #4
 585              	.LCFI7:
 586              		.cfi_restore 14
 587              		.cfi_def_cfa_offset 16
 588 0018 04B0     		add	sp, sp, #16
 589              	.LCFI8:
 590              		.cfi_restore 3
 591              		.cfi_restore 2
 592              		.cfi_restore 1
 593              		.cfi_restore 0
 594              		.cfi_def_cfa_offset 0
 595 001a 7047     		bx	lr
ARM GAS  /tmp/ccsGGFrI.s 			page 16


 596              		.cfi_endproc
 597              	.LFE4:
 599              		.section	.text.DEBUG_MESSAGE,"ax",%progbits
 600              		.align	1
 601              		.global	DEBUG_MESSAGE
 602              		.syntax unified
 603              		.thumb
 604              		.thumb_func
 605              		.fpu softvfp
 607              	DEBUG_MESSAGE:
 608              	.LFB5:
 229:VS4210/Printf.c **** 
 230:VS4210/Printf.c **** void DEBUG_MESSAGE( const char CODE_P *fmt, ... )
 231:VS4210/Printf.c **** {
 609              		.loc 1 231 0
 610              		.cfi_startproc
 611              		@ args = 4, pretend = 16, frame = 8
 612              		@ frame_needed = 0, uses_anonymous_args = 1
 613              	.LVL109:
 614 0000 0FB4     		push	{r0, r1, r2, r3}
 615              	.LCFI9:
 616              		.cfi_def_cfa_offset 16
 617              		.cfi_offset 0, -16
 618              		.cfi_offset 1, -12
 619              		.cfi_offset 2, -8
 620              		.cfi_offset 3, -4
 621 0002 00B5     		push	{lr}
 622              	.LCFI10:
 623              		.cfi_def_cfa_offset 20
 624              		.cfi_offset 14, -20
 625 0004 83B0     		sub	sp, sp, #12
 626              	.LCFI11:
 627              		.cfi_def_cfa_offset 32
 628 0006 04A9     		add	r1, sp, #16
 629 0008 51F8040B 		ldr	r0, [r1], #4
 232:VS4210/Printf.c **** 	va_list ap;
 233:VS4210/Printf.c **** 	va_start(ap, fmt);
 630              		.loc 1 233 0
 631 000c 0191     		str	r1, [sp, #4]
 234:VS4210/Printf.c **** #ifdef HS_DEBUG
 235:VS4210/Printf.c **** 	DoPrint( fmt, ap );
 632              		.loc 1 235 0
 633 000e FFF7FEFF 		bl	DoPrint
 634              	.LVL110:
 236:VS4210/Printf.c **** #endif
 237:VS4210/Printf.c **** 	va_end( ap );
 238:VS4210/Printf.c **** 
 239:VS4210/Printf.c **** }
 635              		.loc 1 239 0
 636 0012 03B0     		add	sp, sp, #12
 637              	.LCFI12:
 638              		.cfi_def_cfa_offset 20
 639              		@ sp needed
 640 0014 5DF804EB 		ldr	lr, [sp], #4
 641              	.LCFI13:
 642              		.cfi_restore 14
 643              		.cfi_def_cfa_offset 16
ARM GAS  /tmp/ccsGGFrI.s 			page 17


 644 0018 04B0     		add	sp, sp, #16
 645              	.LCFI14:
 646              		.cfi_restore 3
 647              		.cfi_restore 2
 648              		.cfi_restore 1
 649              		.cfi_restore 0
 650              		.cfi_def_cfa_offset 0
 651 001a 7047     		bx	lr
 652              		.cfi_endproc
 653              	.LFE5:
 655              		.section	.text.Puts,"ax",%progbits
 656              		.align	1
 657              		.global	Puts
 658              		.syntax unified
 659              		.thumb
 660              		.thumb_func
 661              		.fpu softvfp
 663              	Puts:
 664              	.LFB6:
 240:VS4210/Printf.c **** 
 241:VS4210/Printf.c **** void Puts( CODE_P char *ptr )
 242:VS4210/Printf.c **** {
 665              		.loc 1 242 0
 666              		.cfi_startproc
 667              		@ args = 0, pretend = 0, frame = 0
 668              		@ frame_needed = 0, uses_anonymous_args = 0
 669              	.LVL111:
 670 0000 10B5     		push	{r4, lr}
 671              	.LCFI15:
 672              		.cfi_def_cfa_offset 8
 673              		.cfi_offset 4, -8
 674              		.cfi_offset 14, -4
 675 0002 0446     		mov	r4, r0
 243:VS4210/Printf.c **** 	while(*ptr!='\0')
 676              		.loc 1 243 0
 677 0004 02E0     		b	.L70
 678              	.LVL112:
 679              	.L71:
 244:VS4210/Printf.c **** 		RS_tx(*ptr++);
 680              		.loc 1 244 0
 681 0006 0134     		adds	r4, r4, #1
 682              	.LVL113:
 683 0008 FFF7FEFF 		bl	RS_tx
 684              	.LVL114:
 685              	.L70:
 243:VS4210/Printf.c **** 	while(*ptr!='\0')
 686              		.loc 1 243 0
 687 000c 2078     		ldrb	r0, [r4]	@ zero_extendqisi2
 688 000e 0028     		cmp	r0, #0
 689 0010 F9D1     		bne	.L71
 245:VS4210/Printf.c **** }
 690              		.loc 1 245 0
 691 0012 10BD     		pop	{r4, pc}
 692              		.cfi_endproc
 693              	.LFE6:
 695              		.section	.text.GraphicsPrint,"ax",%progbits
 696              		.align	1
ARM GAS  /tmp/ccsGGFrI.s 			page 18


 697              		.global	GraphicsPrint
 698              		.syntax unified
 699              		.thumb
 700              		.thumb_func
 701              		.fpu softvfp
 703              	GraphicsPrint:
 704              	.LFB7:
 246:VS4210/Printf.c **** 
 247:VS4210/Printf.c **** 
 248:VS4210/Printf.c **** //===========================================================================//
 249:VS4210/Printf.c **** //                                                                           //
 250:VS4210/Printf.c **** //===========================================================================//
 251:VS4210/Printf.c **** #ifdef DEBUG
 252:VS4210/Printf.c **** 
 253:VS4210/Printf.c **** void dPrintf( const char CODE_P *fmt, ... )
 254:VS4210/Printf.c **** {
 255:VS4210/Printf.c **** 	va_list ap;
 256:VS4210/Printf.c **** 
 257:VS4210/Printf.c **** 	if( DebugLevel >= DEBUG_INFO ) {
 258:VS4210/Printf.c **** 		va_start(ap, fmt);
 259:VS4210/Printf.c **** 		DoPrint( fmt, ap );
 260:VS4210/Printf.c **** 		va_end( ap );
 261:VS4210/Printf.c **** 	}
 262:VS4210/Printf.c **** }
 263:VS4210/Printf.c **** /*
 264:VS4210/Printf.c **** void wPrintf( const char CODE_P *fmt, ... )
 265:VS4210/Printf.c **** {
 266:VS4210/Printf.c **** 	va_list ap;
 267:VS4210/Printf.c **** 
 268:VS4210/Printf.c **** 	if( DebugLevel >= DEBUG_WARN ) {
 269:VS4210/Printf.c **** 		va_start(ap, fmt);
 270:VS4210/Printf.c **** 		DoPrint( fmt, ap );
 271:VS4210/Printf.c **** 		va_end( ap );
 272:VS4210/Printf.c **** 	}
 273:VS4210/Printf.c **** }
 274:VS4210/Printf.c **** */
 275:VS4210/Printf.c **** 
 276:VS4210/Printf.c **** /*
 277:VS4210/Printf.c **** 
 278:VS4210/Printf.c **** void ePrintf( const char CODE_P *fmt, ... )
 279:VS4210/Printf.c **** {
 280:VS4210/Printf.c **** 	va_list ap;
 281:VS4210/Printf.c **** 
 282:VS4210/Printf.c **** 	if( DebugLevel >= DEBUG_ERR ) {
 283:VS4210/Printf.c **** 		va_start(ap, fmt);
 284:VS4210/Printf.c **** 		DoPrint( fmt, ap );
 285:VS4210/Printf.c **** 		va_end( ap );
 286:VS4210/Printf.c **** 	}
 287:VS4210/Printf.c **** }
 288:VS4210/Printf.c **** */
 289:VS4210/Printf.c **** //===========================================================================//
 290:VS4210/Printf.c **** //                                                                           //
 291:VS4210/Printf.c **** //===========================================================================//
 292:VS4210/Printf.c **** void dPuts( CODE_P char *ptr )
 293:VS4210/Printf.c **** {
 294:VS4210/Printf.c **** 	if( DebugLevel >= DEBUG_INFO ) {
 295:VS4210/Printf.c **** 		while(*ptr!='\0')
ARM GAS  /tmp/ccsGGFrI.s 			page 19


 296:VS4210/Printf.c **** 			RS_tx(*ptr++);
 297:VS4210/Printf.c **** 	}
 298:VS4210/Printf.c **** }
 299:VS4210/Printf.c **** 
 300:VS4210/Printf.c **** #if defined( SUPPORT_PC ) || defined( SUPPORT_DTV ) || defined( DEBUG_SETPANEL)
 301:VS4210/Printf.c **** void wPuts( CODE_P char *ptr )
 302:VS4210/Printf.c **** {
 303:VS4210/Printf.c **** 	if( DebugLevel >= DEBUG_WARN ) {
 304:VS4210/Printf.c **** 		while(*ptr!='\0')
 305:VS4210/Printf.c **** 			RS_tx(*ptr++);
 306:VS4210/Printf.c **** 	}
 307:VS4210/Printf.c **** }
 308:VS4210/Printf.c **** 
 309:VS4210/Printf.c **** void ePuts( CODE_P char *ptr )
 310:VS4210/Printf.c **** {
 311:VS4210/Printf.c **** 	if( DebugLevel >= DEBUG_ERR ) {
 312:VS4210/Printf.c **** 		while(*ptr!='\0')
 313:VS4210/Printf.c **** 			RS_tx(*ptr++);
 314:VS4210/Printf.c **** 	}
 315:VS4210/Printf.c **** }
 316:VS4210/Printf.c **** #endif
 317:VS4210/Printf.c **** 
 318:VS4210/Printf.c **** #endif // DEBUG
 319:VS4210/Printf.c **** 
 320:VS4210/Printf.c **** //===========================================================================//
 321:VS4210/Printf.c **** //                                                                          GraphicsPrint
 322:VS4210/Printf.c **** //===========================================================================//
 323:VS4210/Printf.c **** 
 324:VS4210/Printf.c **** void GraphicsPrint(PRINT_COLOR_e mode, const char *Message, ...)
 325:VS4210/Printf.c **** {
 705              		.loc 1 325 0
 706              		.cfi_startproc
 707              		@ args = 4, pretend = 12, frame = 8
 708              		@ frame_needed = 0, uses_anonymous_args = 1
 709              	.LVL115:
 710 0000 0EB4     		push	{r1, r2, r3}
 711              	.LCFI16:
 712              		.cfi_def_cfa_offset 12
 713              		.cfi_offset 1, -12
 714              		.cfi_offset 2, -8
 715              		.cfi_offset 3, -4
 716 0002 00B5     		push	{lr}
 717              	.LCFI17:
 718              		.cfi_def_cfa_offset 16
 719              		.cfi_offset 14, -16
 720 0004 82B0     		sub	sp, sp, #8
 721              	.LCFI18:
 722              		.cfi_def_cfa_offset 24
 326:VS4210/Printf.c **** 		#if (_DEBUG_MESSAGE_COLOR_MESSAGE==ON)
 327:VS4210/Printf.c **** 
 328:VS4210/Printf.c **** 		va_list ap;
 329:VS4210/Printf.c **** 
 330:VS4210/Printf.c **** 		#if (_DEBUG_MESSAGE_Monitor==ON)
 331:VS4210/Printf.c **** 		if( Monitor_flag==_TRUE)
 723              		.loc 1 331 0
 724 0006 0B4B     		ldr	r3, .L76
 725 0008 1B78     		ldrb	r3, [r3]	@ zero_extendqisi2
ARM GAS  /tmp/ccsGGFrI.s 			page 20


 726 000a 012B     		cmp	r3, #1
 727 000c 0CD0     		beq	.L73
 332:VS4210/Printf.c **** 		;
 333:VS4210/Printf.c **** 		else
 334:VS4210/Printf.c **** 		#endif			
 335:VS4210/Printf.c **** 			{
 336:VS4210/Printf.c **** 
 337:VS4210/Printf.c **** 		DEBUG_MESSAGE( _PrintColor[mode]);
 728              		.loc 1 337 0
 729 000e 0A4B     		ldr	r3, .L76+4
 730 0010 53F82000 		ldr	r0, [r3, r0, lsl #2]
 731              	.LVL116:
 732 0014 FFF7FEFF 		bl	DEBUG_MESSAGE
 733              	.LVL117:
 338:VS4210/Printf.c **** 		va_start(ap, Message);
 734              		.loc 1 338 0
 735 0018 04A9     		add	r1, sp, #16
 736 001a 0191     		str	r1, [sp, #4]
 339:VS4210/Printf.c **** 		DoPrint( Message, ap );
 737              		.loc 1 339 0
 738 001c 0398     		ldr	r0, [sp, #12]
 739 001e FFF7FEFF 		bl	DoPrint
 740              	.LVL118:
 340:VS4210/Printf.c **** 		va_end( ap );
 341:VS4210/Printf.c **** 		DEBUG_MESSAGE( _PrintColor[PRINT_COLOR_BLACK]);
 741              		.loc 1 341 0
 742 0022 0648     		ldr	r0, .L76+8
 743 0024 FFF7FEFF 		bl	DEBUG_MESSAGE
 744              	.LVL119:
 745              	.L73:
 342:VS4210/Printf.c **** 			}
 343:VS4210/Printf.c **** 		#else
 344:VS4210/Printf.c **** 			va_list ap;
 345:VS4210/Printf.c **** 			va_start(ap, Message);
 346:VS4210/Printf.c **** 			DoPrint( Message, ap );
 347:VS4210/Printf.c **** 			va_end( ap );
 348:VS4210/Printf.c **** 			mode=1;
 349:VS4210/Printf.c **** 			
 350:VS4210/Printf.c **** 		#endif
 351:VS4210/Printf.c **** }
 746              		.loc 1 351 0
 747 0028 02B0     		add	sp, sp, #8
 748              	.LCFI19:
 749              		.cfi_def_cfa_offset 16
 750              		@ sp needed
 751 002a 5DF804EB 		ldr	lr, [sp], #4
 752              	.LCFI20:
 753              		.cfi_restore 14
 754              		.cfi_def_cfa_offset 12
 755 002e 03B0     		add	sp, sp, #12
 756              	.LCFI21:
 757              		.cfi_restore 3
 758              		.cfi_restore 2
 759              		.cfi_restore 1
 760              		.cfi_def_cfa_offset 0
 761 0030 7047     		bx	lr
 762              	.L77:
ARM GAS  /tmp/ccsGGFrI.s 			page 21


 763 0032 00BF     		.align	2
 764              	.L76:
 765 0034 00000000 		.word	Monitor_flag
 766 0038 00000000 		.word	.LANCHOR1
 767 003c 00000000 		.word	.LC0
 768              		.cfi_endproc
 769              	.LFE7:
 771              		.global	Hex
 772              		.comm	newInRes,4,4
 773              		.section	.data.Hex,"aw",%progbits
 774              		.align	2
 775              		.set	.LANCHOR0,. + 0
 778              	Hex:
 779 0000 30313233 		.ascii	"0123456789ABCDEF\000"
 779      34353637 
 779      38394142 
 779      43444546 
 779      00
 780              		.section	.rodata.GraphicsPrint.str1.4,"aMS",%progbits,1
 781              		.align	2
 782              	.LC0:
 783 0000 1B5B306D 		.ascii	"\033[0m\000"
 783      00
 784              		.section	.rodata._PrintColor,"a",%progbits
 785              		.align	2
 786              		.set	.LANCHOR1,. + 0
 789              	_PrintColor:
 790 0000 00000000 		.word	.LC0
 791 0004 00000000 		.word	.LC1
 792 0008 08000000 		.word	.LC2
 793 000c 10000000 		.word	.LC3
 794 0010 18000000 		.word	.LC4
 795 0014 20000000 		.word	.LC5
 796 0018 28000000 		.word	.LC6
 797 001c 30000000 		.word	.LC7
 798              		.section	.rodata.str1.4,"aMS",%progbits,1
 799              		.align	2
 800              	.LC1:
 801 0000 1B5B303B 		.ascii	"\033[0;31m\000"
 801      33316D00 
 802              	.LC2:
 803 0008 1B5B303B 		.ascii	"\033[0;32m\000"
 803      33326D00 
 804              	.LC3:
 805 0010 1B5B303B 		.ascii	"\033[0;33m\000"
 805      33336D00 
 806              	.LC4:
 807 0018 1B5B303B 		.ascii	"\033[0;34m\000"
 807      33346D00 
 808              	.LC5:
 809 0020 1B5B303B 		.ascii	"\033[0;35m\000"
 809      33356D00 
 810              	.LC6:
 811 0028 1B5B303B 		.ascii	"\033[0;36m\000"
 811      33366D00 
 812              	.LC7:
 813 0030 1B5B303B 		.ascii	"\033[0;37m\000"
ARM GAS  /tmp/ccsGGFrI.s 			page 22


 813      33376D00 
 814              		.text
 815              	.Letext0:
 816              		.file 2 "/home/ryan/xun/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/sys/lock.h"
 817              		.file 3 "/home/ryan/xun/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/sys/_types.h"
 818              		.file 4 "/home/ryan/xun/gcc-arm-none-eabi-7-2018-q2-update/lib/gcc/arm-none-eabi/7.3.1/include/std
 819              		.file 5 "/home/ryan/xun/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/sys/reent.h"
 820              		.file 6 "/home/ryan/xun/gcc-arm-none-eabi-7-2018-q2-update/lib/gcc/arm-none-eabi/7.3.1/include/std
 821              		.file 7 "<built-in>"
 822              		.file 8 "/home/ryan/xun/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/stdio.h"
 823              		.file 9 "VS4210/VXIS_Extern_Define.h"
 824              		.file 10 "TP2824/tpinc/TP2802.h"
 825              		.file 11 "/home/ryan/xun/gcc-arm-none-eabi-7-2018-q2-update/arm-none-eabi/include/stdlib.h"
 826              		.file 12 "sw_i2c/VX_swi2c.h"
 827              		.file 13 "VS4210/VS4210.h"
 828              		.file 14 "VS4210/printf.h"
ARM GAS  /tmp/ccsGGFrI.s 			page 23


DEFINED SYMBOLS
                            *ABS*:0000000000000000 Printf.c
     /tmp/ccsGGFrI.s:16     .text.DoPrint:0000000000000000 $t
     /tmp/ccsGGFrI.s:23     .text.DoPrint:0000000000000000 DoPrint
     /tmp/ccsGGFrI.s:139    .text.DoPrint:0000000000000074 $d
     /tmp/ccsGGFrI.s:173    .text.DoPrint:00000000000000b6 $t
     /tmp/ccsGGFrI.s:538    .text.DoPrint:0000000000000244 $d
     /tmp/ccsGGFrI.s:544    .text.Printf:0000000000000000 $t
     /tmp/ccsGGFrI.s:551    .text.Printf:0000000000000000 Printf
     /tmp/ccsGGFrI.s:600    .text.DEBUG_MESSAGE:0000000000000000 $t
     /tmp/ccsGGFrI.s:607    .text.DEBUG_MESSAGE:0000000000000000 DEBUG_MESSAGE
     /tmp/ccsGGFrI.s:656    .text.Puts:0000000000000000 $t
     /tmp/ccsGGFrI.s:663    .text.Puts:0000000000000000 Puts
     /tmp/ccsGGFrI.s:696    .text.GraphicsPrint:0000000000000000 $t
     /tmp/ccsGGFrI.s:703    .text.GraphicsPrint:0000000000000000 GraphicsPrint
     /tmp/ccsGGFrI.s:765    .text.GraphicsPrint:0000000000000034 $d
     /tmp/ccsGGFrI.s:778    .data.Hex:0000000000000000 Hex
                            *COM*:0000000000000004 newInRes
     /tmp/ccsGGFrI.s:774    .data.Hex:0000000000000000 $d
     /tmp/ccsGGFrI.s:781    .rodata.GraphicsPrint.str1.4:0000000000000000 $d
     /tmp/ccsGGFrI.s:785    .rodata._PrintColor:0000000000000000 $d
     /tmp/ccsGGFrI.s:789    .rodata._PrintColor:0000000000000000 _PrintColor
     /tmp/ccsGGFrI.s:799    .rodata.str1.4:0000000000000000 $d

UNDEFINED SYMBOLS
RS_tx
Monitor_flag
